<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Number Hunt - The Ultimate Social Deduction Game</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/auth.css">
    <style>
        /* Additional CSS for enhanced features */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .stat-item {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .stat-value {
            display: block;
            font-size: 2rem;
            font-weight: 700;
            color: #4facfe;
            margin-bottom: 5px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .room-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .room-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }
        
        .room-card.selected {
            border-color: #4facfe;
            background: rgba(79, 172, 254, 0.2);
        }
        
        .room-settings {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 15px 0;
        }
        
        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            border-left: 3px solid #4facfe;
        }
        
        .setting-label {
            font-weight: 600;
            opacity: 0.9;
        }
        
        .setting-value {
            font-weight: 700;
            color: #4facfe;
        }
        
        .players-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .player-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .player-card.connected {
            border-color: #48bb78;
            box-shadow: 0 0 10px rgba(72, 187, 120, 0.3);
        }
        
        .player-card.disconnected {
            border-color: #f56565;
            opacity: 0.6;
        }
        
        .player-avatar {
            font-size: 2rem;
            margin-bottom: 8px;
        }
        
        .player-name {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .player-status {
            font-size: 0.9rem;
            margin-bottom: 5px;
        }
        
        .player-score {
            font-size: 0.8rem;
            opacity: 0.8;
        }
        
        .room-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .room-status {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .room-status.waiting {
            background: #48bb78;
            color: white;
        }
        
        .room-status.in_progress {
            background: #ed8936;
            color: white;
        }
        
        .profile-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.15), rgba(255, 255, 255, 0.05));
        }
        
        .profile-header {
            display: flex;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .profile-avatar {
            font-size: 4rem;
            margin-right: 20px;
        }
        
        .profile-level {
            color: #4facfe;
            font-weight: 600;
            margin: 5px 0;
        }
        
        .profile-rank {
            color: #ffd700;
            font-weight: 600;
        }
        
        .stat-group {
            margin-bottom: 30px;
        }
        
        .stat-group h3 {
            margin-bottom: 15px;
            color: #e2e8f0;
        }
        
        .leaderboard-list {
            max-height: 500px;
            overflow-y: auto;
        }
        
        .leaderboard-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .leaderboard-item.current-user {
            border-color: #4facfe;
            background: rgba(79, 172, 254, 0.2);
        }
        
        .leaderboard-item .rank {
            font-size: 1.5rem;
            font-weight: 700;
            width: 60px;
            text-align: center;
            color: #4facfe;
        }
        
        .leaderboard-item .player-info {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .leaderboard-item .avatar {
            font-size: 1.5rem;
        }
        
        .leaderboard-item .username {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .leaderboard-item .level {
            background: rgba(255, 255, 255, 0.2);
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
        }
        
        .leaderboard-item .stats {
            text-align: right;
        }
        
        .achievements-section {
            margin-top: 30px;
        }
        
        .achievement-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin-bottom: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            border-left: 4px solid #4facfe;
        }
        
        .achievement-item.completed {
            border-left-color: #48bb78;
            background: rgba(72, 187, 120, 0.1);
        }
        
        .achievement-icon {
            font-size: 2rem;
            margin-right: 15px;
        }
        
        .achievement-info h4 {
            margin: 0 0 5px 0;
            font-size: 1.1rem;
        }
        
        .achievement-info p {
            margin: 0;
            opacity: 0.8;
            font-size: 0.9rem;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            margin-top: 8px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: #4facfe;
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        @media (max-width: 768px) {
            .stats-grid {
                grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
                gap: 15px;
            }
            
            .profile-header {
                flex-direction: column;
                text-align: center;
            }
            
            .profile-avatar {
                margin-right: 0;
                margin-bottom: 15px;
            }
            
            .leaderboard-item {
                flex-direction: column;
                text-align: center;
                gap: 10px;
            }
            
            .leaderboard-item .rank {
                width: auto;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation Bar -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <h1 onclick="if(window.game && window.game.authManager && window.game.authManager.isAuthenticated()) window.game.showMainMenu(); else if(window.game) window.game.showAuthScreen();" style="cursor: pointer;">🎯 NUMBER HUNT</h1>
            </div>
            <div class="nav-content">
                <div class="nav-breadcrumb" id="navBreadcrumb"></div>
                <div id="userInfo" class="user-info hidden"></div>
                <div id="authButtons" class="auth-buttons">
                    <button class="btn btn-secondary" onclick="if(window.game) window.game.showAuthScreen(); setTimeout(() => window.game.switchTab('login'), 100);">Login</button>
                    <button class="btn btn-primary" onclick="if(window.game) window.game.showAuthScreen(); setTimeout(() => window.game.switchTab('register'), 100);">Register</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Authentication Screen -->
    <div id="authScreen" class="screen">
        <div class="container">
            <div class="auth-container">
                <div class="auth-header">
                    <h1>Welcome to Number Hunt</h1>
                    <p>The ultimate social deduction game</p>
                </div>
                
                <div class="auth-tabs">
                    <button class="tab-btn active" data-tab="login">Login</button>
                    <button class="tab-btn" data-tab="register">Sign Up</button>
                </div>
                
                <!-- Login Tab -->
                <div id="loginTab" class="tab-content active">
                    <form id="loginForm" class="auth-form">
                        <div class="form-group">
                            <label class="form-label" for="loginUsernameEmail">Username or Email</label>
                            <input type="text" id="loginUsernameEmail" name="username_or_email" class="form-input" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="loginPassword">Password</label>
                            <input type="password" id="loginPassword" name="password" class="form-input" required>
                        </div>
                        
                        <button type="submit" class="btn btn-primary btn-full">Login</button>
                    </form>
                    
                    <div class="auth-footer">
                        <p><small>Test account: username: <strong>testuser</strong>, password: <strong>testpass123</strong></small></p>
                    </div>
                </div>
                
                <!-- Register Tab -->
                <div id="registerTab" class="tab-content">
                    <form id="registerForm" class="auth-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="firstName">First Name</label>
                                <input type="text" id="firstName" name="first_name" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="lastName">Last Name</label>
                                <input type="text" id="lastName" name="last_name" class="form-input" required>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="username">Username</label>
                            <input type="text" id="username" name="username" class="form-input" required>
                        </div>
                        
                        <div class="form-group">
                            <label class="form-label" for="email">Email</label>
                            <input type="email" id="email" name="email" class="form-input" required>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="password">Password</label>
                                <input type="password" id="password" name="password" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="passwordConfirm">Confirm Password</label>
                                <input type="password" id="passwordConfirm" name="password_confirm" class="form-input" required>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label class="form-label" for="avatar">Choose Avatar</label>
                                <select id="avatar" name="avatar" class="form-input">
                                    <option value="detective_1">🕵️ Detective Classic</option>
                                    <option value="detective_2">👨‍💼 Business Detective</option>
                                    <option value="detective_3">👩‍💼 Lady Detective</option>
                                    <option value="spy_1">🕴️ Secret Agent</option>
                                    <option value="ninja_1">🥷 Ninja</option>
                                    <option value="robot_1">🤖 Android</option>
                                    <option value="alien_1">👽 Alien</option>
                                    <option value="ghost_1">👻 Ghost</option>
                                    <option value="wizard_1">🧙‍♂️ Wizard</option>
                                    <option value="witch_1">🧙‍♀️ Witch</option>
                                    <option value="pirate_1">🏴‍☠️ Pirate</option>
                                    <option value="superhero_1">🦸‍♂️ Hero</option>
                                    <option value="superhero_2">🦸‍♀️ Heroine</option>
                                    <option value="vampire_1">🧛‍♂️ Vampire</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="gender">Gender (Optional)</label>
                                <select id="gender" name="gender" class="form-input">
                                    <option value="prefer_not_say">Prefer not to say</option>
                                    <option value="male">Male</option>
                                    <option value="female">Female</option>
                                    <option value="non_binary">Non-binary</option>
                                </select>
                            </div>
                        </div>
                        
                        <button type="submit" class="btn btn-primary btn-full">Create Account</button>
                    </form>
                </div>
                
                <div class="auth-footer">
                    <p>Join thousands of players in the ultimate game of deduction!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Main Menu Screen -->
    <div id="menuScreen" class="screen">
        <div class="container">
            <div class="header">
                <h1>NUMBER HUNT</h1>
                <p class="subtitle">The Ultimate Social Deduction Game</p>
            </div>
            
            <!-- User Stats Overview -->
            <div id="userStatsContainer" class="card stats-overview">
                <!-- Stats will be populated by JavaScript -->
            </div>
            
            <div class="main-menu-grid">
                <div class="menu-section">
                    <h2>🎮 Play</h2>
                    <div class="menu-buttons">
                        <button id="createRoomBtn" class="btn btn-primary btn-large">
                            <span class="btn-icon">➕</span>
                            Create Room
                        </button>
                        <button id="joinRoomBtn" class="btn btn-secondary btn-large">
                            <span class="btn-icon">🚪</span>
                            Join Public Room
                        </button>
                        <button id="joinByCodeBtn" class="btn btn-secondary btn-large">
                            <span class="btn-icon">🔗</span>
                            Join by Code
                        </button>
                    </div>
                </div>
                
                <div class="menu-section">
                    <h2>👤 Profile & Stats</h2>
                    <div class="menu-buttons">
                        <button id="profileBtn" class="btn btn-secondary btn-large">
                            <span class="btn-icon">📊</span>
                            My Profile
                        </button>
                        <button id="leaderboardBtn" class="btn btn-secondary btn-large">
                            <span class="btn-icon">🏆</span>
                            Leaderboard
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="card how-to-play">
                <h3>🎯 How to Play</h3>
                <div class="rules-grid">
                    <div class="rule-item">
                        <strong>1. Join a Room:</strong> Create or join a game room with 3-12 players
                    </div>
                    <div class="rule-item">
                        <strong>2. Answer Questions:</strong> Most players get the same question, but one gets a different one
                    </div>
                    <div class="rule-item">
                        <strong>3. Discuss:</strong> Talk about the answers and try to find the imposter
                    </div>
                    <div class="rule-item">
                        <strong>4. Vote:</strong> Vote for who you think is the imposter
                    </div>
                    <div class="rule-item">
                        <strong>5. Win:</strong> Detectives win by catching the imposter, imposter wins by staying hidden
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Create Room Screen -->
    <div id="createRoomScreen" class="screen">
        <div class="container">
            <div class="header">
                <h1>Create New Room</h1>
                <button class="btn btn-secondary back-btn">← Back to Menu</button>
            </div>
            
            <div class="card">
                <form id="createRoomForm">
                    <div class="form-sections">
                        <div class="form-section">
                            <h3>📝 Basic Settings</h3>
                            
                            <div class="form-group">
                                <label class="form-label" for="roomName">Room Name</label>
                                <input type="text" id="roomName" name="roomName" class="form-input" placeholder="Enter room name" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label" for="description">Description (Optional)</label>
                                <textarea id="description" name="description" class="form-input" rows="3" placeholder="Describe your room..."></textarea>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="maxPlayers">Max Players</label>
                                    <select id="maxPlayers" name="maxPlayers" class="form-input" required>
                                        <option value="4">4 Players</option>
                                        <option value="5">5 Players</option>
                                        <option value="6" selected>6 Players</option>
                                        <option value="7">7 Players</option>
                                        <option value="8">8 Players</option>
                                        <option value="10">10 Players</option>
                                        <option value="12">12 Players</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="totalRounds">Number of Rounds</label>
                                    <select id="totalRounds" name="totalRounds" class="form-input" required>
                                        <option value="3">3 Rounds</option>
                                        <option value="5" selected>5 Rounds</option>
                                        <option value="7">7 Rounds</option>
                                        <option value="10">10 Rounds</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3>🎲 Game Settings</h3>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="difficultyLevel">Difficulty Level</label>
                                    <select id="difficultyLevel" name="difficultyLevel" class="form-input">
                                        <option value="easy">Easy (1-2)</option>
                                        <option value="medium">Medium (2-3)</option>
                                        <option value="hard">Hard (3-4)</option>
                                        <option value="expert">Expert (4-5)</option>
                                        <option value="mixed" selected>Mixed Difficulty</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="categoryPreference">Category Preference</label>
                                    <select id="categoryPreference" name="categoryPreference" class="form-input">
                                        <option value="">All Categories</option>
                                        <option value="lifestyle">Lifestyle & Habits</option>
                                        <option value="preferences">Preferences & Opinions</option>
                                        <option value="experiences">Experiences</option>
                                        <option value="hypothetical">Hypothetical</option>
                                        <option value="general">General</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="form-label" for="discussionTime">Discussion Time (seconds)</label>
                                    <select id="discussionTime" name="discussionTime" class="form-input">
                                        <option value="120">2 minutes</option>
                                        <option value="180" selected>3 minutes</option>
                                        <option value="240">4 minutes</option>
                                        <option value="300">5 minutes</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label" for="votingTime">Voting Time (seconds)</label>
                                    <select id="votingTime" name="votingTime" class="form-input">
                                        <option value="30">30 seconds</option>
                                        <option value="60" selected>1 minute</option>
                                        <option value="90">1.5 minutes</option>
                                        <option value="120">2 minutes</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-section">
                            <h3>🔒 Privacy & Options</h3>
                            
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="isPrivate" name="isPrivate">
                                    <span class="checkmark"></span>
                                    Private Room (requires room code to join)
                                </label>
                            </div>
                            
                            <div class="form-group" id="passwordGroup" style="display: none;">
                                <label class="form-label" for="password">Room Password (Optional)</label>
                                <input type="password" id="password" name="password" class="form-input" placeholder="Enter password for extra security">
                            </div>
                            
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="allowRejoining" name="allowRejoining" checked>
                                    <span class="checkmark"></span>
                                    Allow players to rejoin if disconnected
                                </label>
                            </div>
                            
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="spectatorsAllowed" name="spectatorsAllowed">
                                    <span class="checkmark"></span>
                                    Allow spectators
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-full">Create Room</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Enhanced Join Room Screen -->
    <div id="joinRoomScreen" class="screen">
        <div class="container">
            <div class="header">
                <h1>Join Public Room</h1>
                <button class="btn btn-secondary back-btn">← Back to Menu</button>
            </div>
            
            <div class="card">
                <h3 class="card-title">Available Public Rooms</h3>
                <div id="availableRooms" class="mb-3">
                    <div class="loading">
                        <div class="spinner"></div>
                    </div>
                </div>
                
                <form id="joinRoomForm">
                    <input type="hidden" id="selectedRoomId" name="roomId" required>
                    
                    <div class="form-group">
                        <label class="form-label" for="joinNickname">Your Display Name</label>
                        <input type="text" id="joinNickname" name="nickname" class="form-input" placeholder="Enter your display name" required>
                    </div>
                    
                    <div class="form-group" id="joinPasswordGroup" style="display: none;">
                        <label class="form-label" for="joinPassword">Room Password</label>
                        <input type="password" id="joinPassword" name="password" class="form-input" placeholder="Enter room password">
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Join Selected Room</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Join by Code Screen -->
    <div id="joinByCodeScreen" class="screen">
        <div class="container">
            <div class="header">
                <h1>Join by Room Code</h1>
                <button class="btn btn-secondary back-btn">← Back to Menu</button>
            </div>
            
            <div class="card">
                <h3 class="card-title">Enter Room Code</h3>
                <p>Got a room code from a friend? Enter it below to join their private game!</p>
                
                <form id="joinByCodeForm">
                    <div class="form-group">
                        <label class="form-label" for="roomCode">6-Character Room Code</label>
                        <input type="text" id="roomCode" name="roomCode" class="form-input room-code-input" placeholder="ABC123" maxlength="6" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="codeNickname">Your Display Name</label>
                        <input type="text" id="codeNickname" name="nickname" class="form-input" placeholder="Enter your display name" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="codePassword">Room Password (if required)</label>
                        <input type="password" id="codePassword" name="password" class="form-input" placeholder="Enter password if room is protected">
                    </div>
                    
                    <button type="submit" class="btn btn-primary btn-full">Join Room</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Enhanced Profile Screen -->
    <div id="profileScreen" class="screen">
        <div class="container">
            <div class="header">
                <h1>My Profile</h1>
                <button class="btn btn-secondary back-btn">← Back to Menu</button>
            </div>
            
            <div id="profileContainer">
                <div class="loading">
                    <div class="spinner"></div>
                    <p>Loading profile...</p>
                </div>
            </div>
            
            <!-- Profile Update Form -->
            <div class="card">
                <h3>Update Profile</h3>
                <form id="profileUpdateForm">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="updateAvatar">Avatar</label>
                            <select id="updateAvatar" name="avatar" class="form-input">
                                <option value="detective_1">🕵️ Detective Classic</option>
                                <option value="detective_2">👨‍💼 Business Detective</option>
                                <option value="detective_3">👩‍💼 Lady Detective</option>
                                <option value="spy_1">🕴️ Secret Agent</option>
                                <option value="ninja_1">🥷 Ninja</option>
                                <option value="robot_1">🤖 Android</option>
                                <option value="alien_1">👽 Alien</option>
                                <option value="ghost_1">👻 Ghost</option>
                                <option value="wizard_1">🧙‍♂️ Wizard</option>
                                <option value="witch_1">🧙‍♀️ Witch</option>
                                <option value="pirate_1">🏴‍☠️ Pirate</option>
                                <option value="superhero_1">🦸‍♂️ Hero</option>
                                <option value="superhero_2">🦸‍♀️ Heroine</option>
                                <option value="vampire_1">🧛‍♂️ Vampire</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="updatePreferredCategory">Preferred Question Category</label>
                            <select id="updatePreferredCategory" name="preferred_category" class="form-input">
                                <option value="">No Preference</option>
                                <option value="lifestyle">Lifestyle & Habits</option>
                                <option value="preferences">Preferences & Opinions</option>
                                <option value="experiences">Experiences</option>
                                <option value="hypothetical">Hypothetical</option>
                                <option value="general">General</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="updateBio">Bio (Optional)</label>
                        <textarea id="updateBio" name="bio" class="form-input" rows="3" placeholder="Tell other players about yourself..."></textarea>
                    </div>
                    
                    <button type="submit" class="btn btn-primary">Update Profile</button>
                </form>
            </div>
        </div>
    </div>

    <!-- Leaderboard Screen -->
    <div id="leaderboardScreen" class="screen">
        <div class="container">
            <div class="header">
                <h1>🏆 Leaderboard</h1>
                <button class="btn btn-secondary back-btn">← Back to Menu</button>
            </div>
            
            <div class="card">
                <div class="leaderboard-tabs">
                    <button class="tab-btn active" data-leaderboard="score">Top Score</button>
                    <button class="tab-btn" data-leaderboard="wins">Most Wins</button>
                    <button class="tab-btn" data-leaderboard="win_rate">Best Win Rate</button>
                </div>
                
                <div id="leaderboardContainer">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading leaderboard...</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Enhanced Lobby Screen -->
    <div id="lobbyScreen" class="screen">
        <div class="container">
            <div class="header">
                <h1 id="lobbyRoomName">Game Lobby</h1>
                <div class="room-info">
                    <span>Room Code: <strong id="lobbyRoomCode">------</strong></span>
                    <span>Players: <span id="lobbyPlayerCount">0/0</span></span>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">Players in Room</h3>
                    <div class="lobby-actions">
                        <button id="toggleReadyBtn" class="btn btn-secondary">Ready</button>
                        <button id="startGameBtn" class="btn btn-success hidden">Start Game</button>
                        <button id="leaveRoomBtn" class="btn btn-error">Leave Room</button>
                    </div>
                </div>
                
                <div id="lobbyPlayers" class="players-grid">
                    <!-- Players will be populated here -->
                </div>
                
                <div id="lobbyStatus" class="text-center">
                    <p class="mb-2">Waiting for more players...</p>
                    <p><small>Need at least 3 players to start the game</small></p>
                </div>
            </div>
            
            <!-- Room Settings Display -->
            <div class="card">
                <h3>🎲 Game Settings</h3>
                <div id="roomSettingsDisplay" class="settings-display">
                    <!-- Settings will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Game Screens (Placeholder for future implementation) -->
    <div id="gameScreen" class="screen">
        <div class="container">
            <div class="header">
                <h1>Game in Progress</h1>
            </div>
            <div class="card">
                <p class="text-center">Game functionality will be implemented in Phase 2</p>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner large"></div>
            <p>Loading...</p>
        </div>
    </div>

    <!-- Scripts - Load in correct order -->
    <script src="/static/js/auth.js"></script>
    <script src="/static/js/app.js"></script>
    
    <script>
        // Additional JavaScript for form interactions
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing additional features...');
            
            // Toggle password field for private rooms
            const isPrivateCheckbox = document.getElementById('isPrivate');
            const passwordGroup = document.getElementById('passwordGroup');
            
            if (isPrivateCheckbox && passwordGroup) {
                isPrivateCheckbox.addEventListener('change', function() {
                    passwordGroup.style.display = this.checked ? 'block' : 'none';
                });
            }
            
            // Auto-uppercase room codes
            const roomCodeInput = document.getElementById('roomCode');
            if (roomCodeInput) {
                roomCodeInput.addEventListener('input', function() {
                    this.value = this.value.toUpperCase();
                });
            }
        });
    </script>
</body>
</html>